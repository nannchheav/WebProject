{% extends 'accounts/pages.html' %}

{% load static %}

{% block content %}

      <!--breadcrumbs area start-->
    <div class="breadcrumbs_area breadcrumbs_other">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="breadcrumb_content text-center">
                        <ul>
                            <li><a href="{% url 'index' %}">home</a></li>
                            <li><a href="#">pages</a></li>
                        </ul>
                        <h3>checkout</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--breadcrumbs area end-->

    <!--Checkout page section-->
    <div class="checkout_section" id="accordion">
       <div class="container">
            
            <div class="checkout_form">
                <div class="row">
                    <div class="col-lg-7 col-md-6">
                        <form action="#">
                            <h3>Billing Details</h3>
                            <div class="checkout_form_input">
                                <label for="country">country <span>*</span></label>
                                    <select class="select_option" name="cuntry" id="country">
                                    <option value="2">United Kingdom (UK)  </option>
                                    <option value="3">Algeria</option>
                                    <option value="4">Afghanistan</option>
                                    <option value="5">Ghana</option>
                                    <option value="6">Albania</option>
                                    <option value="7">Bahrain</option>
                                    <option value="8">Colombia</option>
                                    <option value="9">Dominican Republic</option>
                                </select>
                            </div>
                            <div class="checkout_form_input">
                                <label>First Name <span>*</span></label>
                                <input type="text">
                            </div>
                            <div class="checkout_form_input">
                                <label>Last Name  <span>*</span></label>
                                <input type="text">
                            </div>
                           
                            <div class="checkout_form_input">
                               <label>Address  <span>*</span></label>
                                <input type="text">
                            </div>
                            <div class="checkout_form_input">
                                <label>Town / City <span>*</span></label>
                                <input  type="text">
                            </div>
                            <div class="checkout_form_input">
                                <label> Email Address   <span>*</span></label>
                                <input  type="text">
                            </div>
                            <div class="checkout_form_input">
                                <label> Phone <span>*</span></label>
                                <input  type="text">
                            </div>
                            
                        </form>
                    </div>
                    <div class="col-lg-5 col-md-6">
                        <div class="order_table_right">
                            <form action="#">
                                <h3>Your order</h3>
                                <div class="order_table table-responsive">
                                    
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Product</th>
                                                <th class="text-right">Total</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for item in cart_items %}
                                            <tr>
                                                <td>{{ item.product.productName }}</td>
                                                <td class="text-right">${{ item.total_price }}</td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td>Cart Subtotal</td>
                                                <td class="text-right">${{ cart_total }}</td>
                                            </tr>
                                            <tr class="order_total">
                                                <th>Order Total</th>
                                                <td class="text-right">${{ cart_total }}</td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                    
                                    <div class="panel-default">
                                        <div class="panel_radio">
                                            <input id="payment2" name="check_method" type="radio" data-target="createp_account" />
                                            <span class="checkmark"></span>
                                        </div>
                                        <label for="payment2" data-toggle="collapse" data-target="#method2" >QR payment</label>

                                    </div>
                                    <div class="panel-default">
                                        <div class="panel_radio">
                                            <input id="payment3" name="check_method" type="radio" data-target="createp_account" />
                                            <span class="checkmark"></span>
                                        </div>
                                        <label for="payment3" data-toggle="collapse" data-target="#method3" >cash on delivery</label>
                                        
                                    </div>
                                    <div class="panel-default">
                                        <div class="panel_radio">
                                            <input id="payment4" name="check_method" type="radio" data-target="createp_account" />
                                            <span class="checkmark"></span>
                                        </div>
                                        <label for="payment4" data-toggle="collapse" data-target="#method4" >Paypal</label>
                                        
                                    </div>
                                </div>
                                <div class="place_order_btn">
                                   <a class="btn btn-primary"  id="placeOrderBtn">place order</a>
                                </div>

                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--Checkout page section end-->

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- <script>
    $(document).ready(function () {
        $(".place_order_btn").on("click", function (e) {
            e.preventDefault();  // Prevent default form submission

            Swal.fire({
                title: "",
                text: "Place order successfully. Thank you",
                icon: "success",
                showCancelButton: false,
            })
        });
    });
</script> -->
    <script>
        $(document).ready(function () {
            $("#placeOrderBtn").click(function (e) {
                e.preventDefault();  // Prevent default form submission

                $.ajax({
                            url: "{% url 'clear_cart' %}",  
                            method: "POST",
                            data: {
                                csrfmiddlewaretoken: "{{ csrf_token }}"
                            },
                            success: function (response) {
                                Swal.fire({
                                    title: "Success",
                                    text: "Place order successfully. Thank you",
                                    icon: "success"
                                }).then(() => {
                                    window.location.reload(); 
                                });
                            },
                            error: function (xhr, status, error) {
                                Swal.fire({
                                    title: "Error",
                                    text: "An error occurred while clearing your cart.",
                                    icon: "error"
                                });
                            }
                        });
                // Swal.fire({
                //     title: "Information.",
                //     text: "Place order successfully. Thank you",
                //     icon: "Success",
                //     showCancelButton: false,
                //     // confirmButtonColor: "#3085d6",
                //     // cancelButtonColor: "#d33",
                //     confirmButtonText: "Ok"
                // }).then((result) => {
                //     if (result.isConfirmed) {
                        
                //     }
                // });
            });
        });
    </script>
        
    {% endblock %}